### broker常规配置 ###

####1.broker.id ####
每个broker都需要一个标识符，使用broker.id来表示。它的默认值是0，也可以被设置为其他任意整数。这个值在整个kafka集群中必须是唯一的。

####2.port ####
端口号，默认9092

####3.zookeeper.connect ####
用于保存broke元数据的Zookeeper地址是通过zookeeper.connect来指定。该配置参数使用冒号分隔的一组hostname:port/path列表
+ hostname是zookeeper服务器的机器名或IP地址。
+ port是zookeeper的客户端连接端口。
+ path是zookeeper的可选路径,作为kafka集群的chroot环境。如果不指定，则默认根路径。

#### 4.log.dirs ####
Kafka把所有消息都保存在磁盘上，存放这些日志片段的目录是通过log.dirs指定的。它是一组用逗号分隔的本地文件系统路径。如果制定了多个路径，那么broker会根据“最少使用”原则，把同一个分区的日志片段保存到偶同一个路径下。broker会往拥有最少数据分区的路径新增分区，而不是往拥有最小磁盘空间的路径新增分区。

#### 5. num.recovery.thread.per.data.dir ####

对于如下3中情况，kafka会使用可配置的线程池来处理日志片段：
+ 服务器正常启动，用于打开每个分区的日志片段；
+ 服务器崩溃后重启，用于检查和截短每个分区的日志片段；
+ 服务器正常关闭，用于关闭日志片段。

默认情况下，每个日志目录只使用一个线程。因为这些线程只有在服务器启动和关闭时会用到，所以完全可以设置大量的线程来达到并行操作的目的。特别是对于包含大量分区的服务器来说，一旦发生崩溃，在进行恢复时使用并行操作的可能会省下数小时的时间。设置此参数时，需要注意所配置的数字对应的是log.dirs指定的单个日志目录。也就是说，如果num.recovery.thread.per.data.dir = 8 并且log.dir=3,那么总共需要24个线程。

#### 6. auto.create.topics.enable ####
默认情况下，kafka会在如下几种情况下自动创建主题：
+ 当一个生产者开始往主题写入消息时；
+ 当一个消费者开始从主题读取消息时；
+ 当任意一个客户端想主题发送元数据请求时。

### 主题配置 ###

#### 1. num.partitions

num.partitions 参数指定了新创建的主题将包含多少个分区。如果启用了主题自动创建功能，主题的分区个数就是该参数指定的值。该参数的默认值是1。要注意我们可以增加主题分区的个数，但是不能减少主题分区的个数。


#### 2. log.retention.ms ####
kafka通常根据时间来决定数据可以被保留多久。默认使用log.retention.hours 参数来配置时间，默认值为168小时，也就是一周。除此以外，还有其他两个参数log.retention.minutes和log.retention.ms。这三个参数的作用是一样的，都是决定消息多久后会被删除。如果制定了不止一个参数，kafka会优先使用具有最小值的那个参数。


#### 3.log.retention.bytes ####
log.retention.bytes指定保留的消息字节数来判断消息是否过期。如果一个包含八个分区的主题，并且log.retention.bytes被设为1GB，那么这个主题最多可以保留8GB的数据。

#### 4. log.segment.bytes ####
以上的设置都作用在日志片段上，而不是作用在单个消息上。当消息达到broker时，它们被追加到分区的当前日志片段上。当日志片段大小达到log.segment.bytes指定的上线（默认1GB）时，当前日志片段就会被关闭，一个新的日志片段被打开。如果一个日志片段被关闭，就开始等待过期。这个参数的值越小，就会越频繁的关闭和分配新文件，从而降低磁盘写入的整体效率。

#### 5.log.segment.ms ####
另一个可以控制日志片段关闭时间的参数是log.segment.ms,它指定了多长时间之后日志片段会被关闭。基于时间的日志片段对磁盘性能有一定影响，在使用基于时间的日志片段时，要着重考虑并行关闭多个日志片段对磁盘性能的影响。

#### 6. message.max.bytes #### 
broker通过设置message.max.bytes参数来限制单个消息的大小，默认值是1000000，也就是1MB。如果生产者尝试发送的消息超过这个大小，不仅消息不会被接收，还会受到broker返回的错误信息。跟其他与字节相关的配置参数一样，该参数指的是压缩后的消息大小，也就是说，只要压缩后的消息小于message.max.bytes指定的值，消息的实际大小可以远大于该值。